{"name":"converter","theme":"bootsketch","pages":[{"name":"currency_1","config":[],"content":[{"name":"item_12de3ae4","type":"navigation","item-type":"title-bar","content":[{"name":"item_fd33d7e1","type":"content","item-type":"title","content":"<h1>Currency Converter</h1>"}],"extends":{"type":"area","item-type":"row"}},{"name":"item_94fdc53f","type":"area","item-type":"static","content":[{"name":"item_a0fee735","type":"component","item-type":"web-component-es2015","template":"<exchange-widget></exchange-widget>","content":"","component":"exchange_widget","attributes":{"from":"{{currency_1.from}}","to":"{{currency_1.to}}"}}]},{"name":"item_0500ccd9","type":"area","item-type":"scrollable","content":[{"name":"amount","type":"question","item-type":"number","label":"Amount","required":false},{"name":"from","type":"question","item-type":"select","label":"From:","required":true,"options":[{"label":"GBP","value":"GBP"},{"label":"USD","value":"USD"},{"label":"EURO","value":"EUR"}],"expressions":{},"actions":[],"description":"Choose base currency.","message":"This is a required field"},{"name":"to","type":"question","item-type":"select","label":"To:","required":true,"options":[{"label":"GBP","value":"GBP"},{"label":"USD","value":"USD"},{"label":"EURO","value":"EUR"}],"expressions":{},"actions":[],"description":"Choose base currency.","message":"This is a required field"},{"name":"item_1120c7b3","type":"control","item-type":"button","content":"<span class='icon icon-coins'></span> Convert","expressions":{},"actions":[{"event":"click","type":"set-variable","data":{"name":"loading","value":"true"}},{"event":"click","type":"call-api","data":{"method":"get","name":"jsonrates","operation":"getRates","params":{"from":"{{currency_1.from}}","to":"{{currency_1.to}}","base":"{{currency_1.from}}","symbols":"{{currency_1.to}}"}}},{"event":"click","type":"call-function","data":{"params":{},"name":"saveRate"}},{"event":"click","type":"set-variable","data":{"name":"loading","value":"false"}}]},{"name":"item_61175cf7","type":"content","item-type":"html","content":"<h1><center>{{'currency_1.amount * data__.variables.rate' | store | number:2}} {{'currency_1.to' | store}}</center></h1>","expressions":{"show":"data__.variables.rate > 0 && data__.variables.loading != true"},"actions":[]}]}]}],"config":[{"name":"jsonrates","type":"integration","item-type":"api","headers":{},"params":[],"operations":[{"name":"getRates","summary":"Get rates","path":"/latest","method":"JSONP","params":[{"name":"base","description":"from","type":"string","in":"query","required":true},{"name":"symbols","description":"to","type":"string","in":"query","required":true}]}],"url":"http://api.fixer.io"},{"name":"saveRate","type":"script","item-type":"function","params":[],"content":"for (rate in mdm.store.data__.api.jsonrates.getRates.rates) {\n\tmdm.store.data__.variables.rate = mdm.store.data__.api.jsonrates.getRates.rates[rate];\n}"},{"name":"loading","type":"script","item-type":"variable","variable-type":"boolean","content":"false","value":"false"}],"translation":{"default":"en_GB"},"version":"1.0","icon":"white","components":[{"content":"InVzZSBzdHJpY3QiOwoKdmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTsKCnZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KF94LCBfeDIsIF94MykgeyB2YXIgX2FnYWluID0gdHJ1ZTsgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7IHZhciBvYmplY3QgPSBfeCwgcHJvcGVydHkgPSBfeDIsIHJlY2VpdmVyID0gX3gzOyBkZXNjID0gcGFyZW50ID0gZ2V0dGVyID0gdW5kZWZpbmVkOyBfYWdhaW4gPSBmYWxzZTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IF94ID0gcGFyZW50OyBfeDIgPSBwcm9wZXJ0eTsgX3gzID0gcmVjZWl2ZXI7IF9hZ2FpbiA9IHRydWU7IGNvbnRpbnVlIF9mdW5jdGlvbjsgfSB9IGVsc2UgaWYgKCJ2YWx1ZSIgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH0gfTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH0KCihmdW5jdGlvbiAoKSB7CiAgICB2YXIgdGVtcGxhdGUgPSAiXG4gICAgPHN0eWxlPlxuICAgICAgICBAaW1wb3J0IHVybChodHRwOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1Sb2JvdG8rQ29uZGVuc2VkOjQwMCwzMDAsNzAwKTtcbiAgICAgICAgLmNvbnRhaW5lciB7XG4gICAgICAgICAgICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgLXdlYmtpdC1mbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgICAgICAgLW1zLWZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgICAgICAgLXdlYmtpdC1qdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgICAtbXMtanVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzM3YmM5YjtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgICAgIGNvbG9yOiAjRkZGO1xuICAgICAgICAgICAgLXdlYmtpdC10ZXh0LXN0cm9rZS13aWR0aDogMXB4O1xuICAgICAgICAgICAgLXdlYmtpdC10ZXh0LXN0cm9rZS1jb2xvcjogIzJFOTc3OTtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICAgIGhlaWdodDogMTUwcHg7XG4gICAgICAgICAgICBmb250LWZhbWlseTogJ1JvYm90byBDb25kZW5zZWQnLCBzYW5zLXNlcmlmO1xuICAgICAgICB9XG4gICAgICAgIC5jb250YWluZXIgLnNlY3Rpb24ge1xuICAgICAgICAgICAgLXdlYmtpdC1mbGV4LWdyb3c6IDE7XG4gICAgICAgICAgICBmbGV4LWdyb3c6IDE7XG4gICAgICAgICAgICAtd2Via2l0LWZsZXgtc2hyaW5rOiAxO1xuICAgICAgICAgICAgZmxleC1zaHJpbms6IDE7XG4gICAgICAgICAgICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgLXdlYmtpdC1mbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgLW1zLWZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgLXdlYmtpdC1qdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIC1tcy1qdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIC5jb250YWluZXIgLmRpcmVjdGlvbiB7XG4gICAgICAgICAgICBmb250LXNpemU6IDIwcHg7XG4gICAgICAgICAgICB3aWR0aDogNTBweDtcbiAgICAgICAgICAgIC13ZWJraXQtZmxleC1ncm93OiAwO1xuICAgICAgICAgICAgLW1zLWZsZXgtZ3JvdzogMDtcbiAgICAgICAgICAgIGZsZXgtZ3JvdzogMDtcbiAgICAgICAgfVxuICAgICAgICAuY29udGFpbmVyIC5mbGFnIHtcbiAgICAgICAgICAgIGJvcmRlcjogc29saWQgMXB4ICMyRTk3Nzk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICAgICAgICB9XG4gICAgICAgIC5jb250YWluZXIgLmZsYWctdGV4dCB7XG4gICAgICAgICAgICBmb250LXNpemU6IDIwcHg7XG4gICAgICAgICAgICBjb2xvcjogIzMzMztcbiAgICAgICAgICAgIC13ZWJraXQtdGV4dC1zdHJva2Utd2lkdGg6IDFweDtcbiAgICAgICAgICAgIC13ZWJraXQtdGV4dC1zdHJva2UtY29sb3I6ICNGRkY7XG4gICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgfVxuICAgIDwvc3R5bGU+XG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZnJvbSBmbGFnIHNlY3Rpb25cIiBpZD1cImZyb21GbGFnXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxhZy10ZXh0XCI+Tm9uZSBzZWxlY3RlZDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRpcmVjdGlvbiBzZWN0aW9uXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dFwiPlRPPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidG8gZmxhZyBzZWN0aW9uXCIgaWQ9XCJ0b0ZsYWdcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGFnLXRleHRcIj5Ob25lIHNlbGVjdGVkPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuIjsKCiAgICB2YXIgRXhjaGFuZ2VXaWRnZXQgPSAoZnVuY3Rpb24gKF9IVE1MRWxlbWVudCkgewogICAgICAgIF9pbmhlcml0cyhFeGNoYW5nZVdpZGdldCwgX0hUTUxFbGVtZW50KTsKCiAgICAgICAgZnVuY3Rpb24gRXhjaGFuZ2VXaWRnZXQoKSB7CiAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBfRXhjaGFuZ2VXaWRnZXQpOwoKICAgICAgICAgICAgX2dldChPYmplY3QuZ2V0UHJvdG90eXBlT2YoX0V4Y2hhbmdlV2lkZ2V0LnByb3RvdHlwZSksICJjb25zdHJ1Y3RvciIsIHRoaXMpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQoKICAgICAgICBfY3JlYXRlQ2xhc3MoRXhjaGFuZ2VXaWRnZXQsIFt7CiAgICAgICAgICAgIGtleTogImNyZWF0ZWRDYWxsYmFjayIsCgogICAgICAgICAgICAvLyBGaXJlcyB3aGVuIGFuIGluc3RhbmNlIG9mIHRoZSBlbGVtZW50IGlzIGNyZWF0ZWQuCiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVkQ2FsbGJhY2soKSB7CiAgICAgICAgICAgICAgICB0aGlzLmlubmVySFRNTCA9IHRlbXBsYXRlOwogICAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgICBrZXk6ICJhdHRhY2hlZENhbGxiYWNrIiwKCiAgICAgICAgICAgIC8vIEZpcmVzIHdoZW4gYW4gaW5zdGFuY2Ugd2FzIGluc2VydGVkIGludG8gdGhlIGRvY3VtZW50LgogICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYXR0YWNoZWRDYWxsYmFjaygpIHt9CiAgICAgICAgfSwgewogICAgICAgICAgICBrZXk6ICJkZXRhY2hlZENhbGxiYWNrIiwKCiAgICAgICAgICAgIC8vIEZpcmVzIHdoZW4gYW4gaW5zdGFuY2Ugd2FzIHJlbW92ZWQgZnJvbSB0aGUgZG9jdW1lbnQuCiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXRhY2hlZENhbGxiYWNrKCkge30KICAgICAgICB9LCB7CiAgICAgICAgICAgIGtleTogImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayIsCgogICAgICAgICAgICAvLyBGaXJlcyB3aGVuIGFuIGF0dHJpYnV0ZSB3YXMgYWRkZWQsIHJlbW92ZWQsIG9yIHVwZGF0ZWQuCiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYXR0ck5hbWUsIG9sZFZhbCwgbmV3VmFsKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGF0dHJOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiZnJvbSI6CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RmxhZygiZnJvbSIsIG5ld1ZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgInRvIjoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGbGFnKCJ0byIsIG5ld1ZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgICBrZXk6ICJzZXRGbGFnIiwKICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEZsYWcodHlwZSwgY3VycmVuY3lDb2RlKSB7CiAgICAgICAgICAgICAgICB2YXIgY291bnRyeSA9IG51bGw7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGN1cnJlbmN5Q29kZS50b1VwcGVyQ2FzZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiVVNEIjoKICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyeSA9ICJ1cyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgIkdCUCI6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnkgPSAidWsiOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICJFVVIiOgogICAgICAgICAgICAgICAgICAgICAgICBjb3VudHJ5ID0gImRlIjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY291bnRyeSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHZhciBmbGFnID0gdGhpcy5xdWVyeVNlbGVjdG9yKCIjIiArIHR5cGUgKyAiRmxhZyIpOwogICAgICAgICAgICAgICAgICAgIGZsYWcuc3R5bGVbImJhY2tncm91bmQtaW1hZ2UiXSA9ICJ1cmwoaHR0cDovL3d3dy5nZW9uYW1lcy5vcmcvZmxhZ3MveC8iICsgY291bnRyeSArICIuZ2lmKSI7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKCIjIiArIHR5cGUgKyAiRmxhZyAuZmxhZy10ZXh0IikuaW5uZXJIVE1MID0gY3VycmVuY3lDb2RlLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9XSk7CgogICAgICAgIHZhciBfRXhjaGFuZ2VXaWRnZXQgPSBFeGNoYW5nZVdpZGdldDsKICAgICAgICBFeGNoYW5nZVdpZGdldCA9IFdlYkNvbXBvbmVudHMuYW5ub3RhdGUoewogICAgICAgICAgICAiYXR0cmlidXRlcyI6IHsKICAgICAgICAgICAgICAgICJwcm9wZXJ0aWVzIjogewogICAgICAgICAgICAgICAgICAgICJmcm9tIjogewogICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJzdHJpbmciLAogICAgICAgICAgICAgICAgICAgICAgICAiZW51bSI6IFsiVVNEIiwgIkdCUCIsICJFVVIiXQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgInRvIjogewogICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJzdHJpbmciLAogICAgICAgICAgICAgICAgICAgICAgICAiZW51bSI6IFsiVVNEIiwgIkdCUCIsICJFVVIiXQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAicmVxdWlyZWQiOiBbInRvIiwgImZyb20iXQogICAgICAgICAgICB9CiAgICAgICAgfSkoRXhjaGFuZ2VXaWRnZXQpIHx8IEV4Y2hhbmdlV2lkZ2V0OwogICAgICAgIHJldHVybiBFeGNoYW5nZVdpZGdldDsKICAgIH0pKEhUTUxFbGVtZW50KTsKCiAgICBkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQoJ2V4Y2hhbmdlLXdpZGdldCcsIEV4Y2hhbmdlV2lkZ2V0KTsKfSkoKTs=","type":"web-component-es2015","element":"exchange-widget","usage":"<exchange-widget></exchange-widget>","name":"exchange_widget"}]}